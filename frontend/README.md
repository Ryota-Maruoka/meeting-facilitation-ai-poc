# Meeting Facilitation PoC - Frontend

AI会議ファシリテーションツールのフロントエンドアプリケーション（Next.js）

## 環境構築

### 1. 依存パッケージのインストール

```bash
cd frontend
npm install
```

### 2. 環境変数の設定

ローカル開発用の環境変数ファイルを作成します:

```bash
# .env.exampleをコピーして.env.localを作成
cp .env.example .env.local
```

**注意**: `.env.local`は必須ではありません。このファイルが存在しない場合、アプリケーションは自動的に以下のように動作します:
- ローカル開発環境 (`localhost`): `http://localhost:8000` にアクセス
- 本番環境: `/backend-api` (Vercelリライト経由でEC2バックエンドにプロキシ)

### 3. 開発サーバーの起動

```bash
npm run dev
```

ブラウザで http://localhost:3000 を開きます。

## API エンドポイントの設定

### 自動切り替え

アプリケーションは実行環境に応じて自動的にAPIエンドポイントを切り替えます:

| 環境 | ホスト名 | APIエンドポイント |
|------|----------|-------------------|
| ローカル開発 | `localhost` または `127.0.0.1` | `http://localhost:8000` |
| 本番環境 | その他 | `/backend-api` |

### 手動設定

環境変数で明示的にエンドポイントを指定することもできます:

```bash
# .env.local
NEXT_PUBLIC_API_URL=http://localhost:8000
```

## ビルドとデプロイ

### 本番ビルド

```bash
npm run build
```

### 本番環境での起動

```bash
npm start
```

## バックエンドの起動

フロントエンドを動作させるには、バックエンドAPIサーバーが起動している必要があります。

```bash
cd ../backend
# バックエンドの起動方法については backend/README.md を参照
```

## パフォーマンス最適化

### 初回コンパイル時間の短縮

Next.jsは初回アクセス時にページをコンパイルします。特にMUIを使用しているページは、初回コンパイルに時間がかかります（1分程度）。

**最適化方法:**

1. **ファイルシステムキャッシュを活用する**
   - 2回目以降のコンパイルは高速化されます（キャッシュが有効）
   - `.next/cache` フォルダーを削除しないようにしてください

2. **開発サーバーを再起動する**
   ```bash
   # Ctrl+C で停止
   npm run dev
   ```

3. **事前にページをウォームアップする**
   - 開発サーバー起動直後に、よく使うページにアクセスしてコンパイルしておく
   - 会議作成 → 会議中画面への遷移がスムーズになります

4. **ソースマップを無効化する（既に設定済み）**
   - `.env.development` で `GENERATE_SOURCEMAP=false` に設定済み
   - コンパイル時間が短縮されます

### 実行環境のパフォーマンス

- **推奨スペック**: CPU 4コア以上、メモリ 8GB以上
- メモリ不足の場合は、他のアプリケーションを終了してください

## トラブルシューティング

### API接続エラー

- ローカル開発時にAPIエラーが発生する場合は、バックエンドサーバーが `http://localhost:8000` で起動していることを確認してください
- 本番環境の場合は、Vercelのリライト設定が正しく構成されていることを確認してください

### favicon 404エラー

faviconは外部サイト（https://www.bemac-fr.com/favicon.ico）から取得しています。ネットワーク環境によってはCORSエラーが発生する可能性があります。

### コンパイルが遅い

初回アクセス時のコンパイルに1分程度かかることがあります。これは正常な動作です。上記の「パフォーマンス最適化」セクションを参照してください。